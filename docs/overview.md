# 《山海情》模拟经营游戏 - 开发任务总览

## 项目概述

基于ECS游戏引擎架构，开发一款类似《冰汽时代》的模拟经营游戏，主题为中国农村脱贫工作。

### 技术选型

- **平台**: Web端（浏览器）
- **美术风格**: 像素风格
- **游戏时长**: 2-3小时深度体验
- **验证机制**: 自动化测试 + 手动验证

---

## 系统架构与依赖关系

### ECS架构层级

```
┌─────────────────────────────────────────────────────────────┐
│                      游戏主场景                              │
│  (GamePlayScene → TaskFlow → Task → SystemList)           │
└─────────────────────────────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        ▼                     ▼                     ▼
┌───────────────┐   ┌─────────────────┐   ┌──────────────────┐
│  游戏核心系统   │   │   资源管理系统   │   │   事件系统       │
│ - GameManager │   │ - ResourceSystem│   │ - EventSystem   │
│ - TimeSystem  │   │ - PopulationSys │   │ - RandomEventSys │
│ - InputSystem │   │ - BuildingSystem│   │ - EndingSystem   │
└───────────────┘   └─────────────────┘   └──────────────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   ECS 底层架构                               │
│  (Stage → Entity → Component + System)                    │
└─────────────────────────────────────────────────────────────┘
```

### 系统依赖关系图

```
                    ┌─────────────────────────────────────┐
                    │         GameManagerSystem           │
                    │    (游戏主控, 游戏状态管理)         │
                    └──────────────┬──────────────────────┘
                                   │
          ┌────────────────────────┼────────────────────────┐
          ▼                        ▼                        ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────┐
│  TimeSystem     │    │  IndicatorSystem│    │  EventManagerSystem│
│  (时间推进)      │    │  (指标计算)      │    │  (事件调度)         │
└────────┬────────┘    └────────┬────────┘    └──────────┬────────┘
         │                      │                         │
         ▼                      ▼                         ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────┐
│ PopulationSystem│    │ ResourceSystem  │    │ MissionSystem       │
│  (人口管理)      │    │  (资源管理)      │    │  (任务系统)         │
└────────┬────────┘    └────────┬────────┘    └──────────┬────────┘
         │                      │                         │
         ▼                      ▼                         ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────────┐
│ BuildingSystem  │    │ IndustrySystem  │    │ PolicySystem       │
│  (建筑系统)      │    │  (产业系统)      │    │  (政策系统)         │
└─────────────────┘    └─────────────────┘    └─────────────────────┘
```

---

## 任务阶段划分

### 阶段一: 基础设施搭建 (Task 1-4)

- 搭建游戏主场景框架
- 实现核心指标系统
- 实现基础资源系统
- 实现时间推进系统

### 阶段二: 核心玩法实现 (Task 5-10)

- 实现人口管理系统
- 实现建筑系统
- 实现产业发展系统
- 实现任务系统

### 阶段三: 高级系统 (Task 11-15)

- 实现政策决策系统
- 实现随机事件系统
- 实现交互UI系统
- 实现结局判定系统

### 阶段四: 内容与优化 (Task 16-20)

- 完善游戏数值平衡
- 添加像素美术资源
- 优化性能
- 添加存档功能

---

## 验证机制设计

### 自动化测试验证

- 单元测试：验证各系统逻辑正确性
- 集成测试：验证系统间交互正常
- 性能测试：验证帧率稳定

### 手动验证检查点

- 每个任务完成后提供演示场景
- 验证点文档记录测试步骤
- 提供调试工具辅助验证

---

## 文件结构

```
docs/
├── overview.md                 # 本文件 - 任务总览
├── task-01-game-scene.md       # 任务1: 游戏主场景
├── task-02-indicator-system.md # 任务2: 核心指标系统
├── task-03-resource-system.md  # 任务3: 基础资源系统
├── task-04-time-system.md      # 任务4: 时间推进系统
├── task-05-population.md       # 任务5: 人口管理系统
├── task-06-building.md         # 任务6: 建筑系统
├── task-07-industry.md         # 任务7: 产业发展系统
├── task-08-mission.md          # 任务8: 任务系统
├── task-09-policy.md           # 任务9: 政策决策系统
├── task-10-event.md            # 任务10: 随机事件系统
├── task-11-ui.md               # 任务11: 交互UI系统
├── task-12-ending.md           # 任务12: 结局判定系统
├── task-13-balance.md          # 任务13: 数值平衡调整
├── task-14-art.md              # 任务14: 像素美术资源
├── task-15-optimize.md         # 任务15: 性能优化
└── task-16-save.md             # 任务16: 存档功能
```

---

## 快速开始

### 验证环境搭建

```bash
cd E:\ECS
npm install
npm test        # 运行自动化测试
npm start       # 启动开发服务器
```

### 验证当前阶段

每个任务完成后：

1. 运行 `npm test` 确认自动化测试通过
2. 访问 `http://localhost:3000` 进行手动验证
3. 查看任务对应的验证检查点文档
